!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Shai=e()}(this,(function(){"use strict";function t(e){var r=Array.isArray(e)?[]:{};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];r[n]="object"==typeof i?t(i):i}return r}return function(){function e(){this.__funcs=[],this.__data=[],this.__propKey="setting",this.setv=this.setv.bind(this),this.nested=this.nested.bind(this),this.settingToArr=this.settingToArr.bind(this),this.bulk=this.bulk.bind(this),this.setValues=this.setValues.bind(this),this.use=this.use.bind(this),this.gen=this.gen.bind(this)}return e.prototype.setv=function(t,e){var r=t.length-1;t.reduce((function(t,n,i){return i===r&&(t[n]=e),t[n]}),this.__data)},e.prototype.nested=function(e,r,n){var i=this;if(n>1){var s=t(e);n--,e.forEach((function(t){t.hasOwnProperty(r)||(t[r]=s,i.nested(t[r],r,n))}))}return e},e.prototype.settingToArr=function(e,r){if(r){var n=function(t){var e=r[t],n="number"==typeof e?e:Array.isArray(e)&&2===e.length?Math.floor(Math.random()*(e[1]-e[0])+e[0]):1;return!n||n<1?1:n},i=n("length"),s=new Array(i);delete e[this.__propKey],r.remove&&r.remove.forEach((function(t){e.hasOwnProperty(t)&&delete e[t]})),r.renew&&(e=Object.assign?Object.assign(e,r.renew):function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}(e,r.renew));for(var o=0;o<i;o++)s[o]=t(e);if("string"==typeof r.child&&r.child){var a=r.child;e[a]=this.nested(s,a,n("level"))}else e=s}return e},e.prototype.bulk=function(){var t=this,e=function(r,n){var i,s;!Array.isArray(r)&&r.hasOwnProperty(t.__propKey)&&("number"==typeof(s=(i=r)[t.__propKey])||Array.isArray(s)&&2===s.length&&"number"==typeof s[0]&&"number"==typeof s[1]?s={length:s}:Array.isArray(s)&&s.length>=2&&"number"==typeof s[0]&&!0===s[1]&&(s={length:s[0],child:"children",level:"number"==typeof s[2]?s[2]:1}),r=i=t.settingToArr(i,s),n?t.setv(n,r):t.setv([],t.__data=r));var o=function(t){if(r.hasOwnProperty(t)){var i=r[t];Array.isArray(i)&&"~~~"!==i[0]?i.forEach((function(r,i){return e(r,n?n.concat([t,i]):[t,i])})):Array.isArray(i)||"object"!=typeof i||e(i,n?n.concat([t]):[t])}};for(var a in r)o(a)};e(this.__data)},e.prototype.setValues=function(t,e){var r=this;if(Array.isArray(t))if("~~~"===t[0]){var n=e||[],i=this.__funcs[t[1]].concat();try{this.setv(n,i.length>0?i[0].apply(i,i[1]):t)}catch(e){throw new Error((n.length>0?n.join("."):t)+": error, "+e)}}else t.forEach((function(t,n){return r.setValues(t,e?e.concat([n]):[n])}));else"object"==typeof t&&Object.keys(t).forEach((function(n){return r.setValues(t[n],e?e.concat([n]):[n])}))},e.prototype.use=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return["~~~",this.__funcs.push([t,e])-1]},e.prototype.gen=function(t,e){if("object"==typeof t)return e&&(this.__propKey=e),this.__data=t,this.bulk(),this.setValues(this.__data),this.__data},e}()}));
//# sourceMappingURL=shai.js.map
